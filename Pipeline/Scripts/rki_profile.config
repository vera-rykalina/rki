
profiles {
  cq_singularity {
    singularity {
      singularity.enabled = true
      singularity.autoMounts = false
      singularity.cacheDir = "$HOME/singularity_containers/"
      docker.enabled = false
      podman.enabled = false
      shifter.enabled = false
      charliecloud.enabled = false
    }
  }

  rki_slurm {
    executor {
      name = "slurm"
      queueSize = 20
      // exitReadTimeout = '360 sec'
      // submitRateLimit = '1/2s'
      // pollInterval = '30 sec' 
    }
    process {
      cache = "lenient"
      cpus = "1"
         withLabel: "iqtree" {
          cpus = "2"
          memory = {4.GB * task.attempt}
          time = "120 h"
          errorStrategy = {task.exitStatus in [137, 140] ? "retry" : "finish"}
          maxRetries = 4
         }
    }
  }

  rki_priority {
    process {
      clusterOptions = '--partition=priority'
    }
  }
}